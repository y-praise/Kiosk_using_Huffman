# 키오스크 주문 관리 시스템 (허프만 부호화 적용)

## 2025년 2학기 자료구조실습 3조 팀 프로젝트

### 팀원 소개
- 김남용
- 오성이
- 윤찬송
- 이용주

---

## 1. 프로젝트 개요

이 프로젝트는 **허프만 부호화(Huffman Coding)** 알고리즘을 활용하여 키오스크(Kiosk)의 주문 내역을 효율적으로 압축하고 관리하는 C++ 프로그램입니다.

레스토랑이나 카페의 키오스크에서 발생하는 주문 데이터는 메뉴 이름(문자열)의 반복으로 인해 많은 저장 공간을 차지할 수 있습니다. 허프만 부호화는 데이터의 등장 빈도를 분석하여, 자주 등장하는 데이터(인기 메뉴)에는 짧은 코드를, 드물게 등장하는 데이터(비인기 메뉴)에는 긴 코드를 할당하여 전체 데이터 크기를 줄이는 압축 알고리즘입니다.

본 프로젝트는 이 원리를 적용하여 주문 내역을 텍스트 파일(`order.txt`)에 압축하여 저장하고, 필요 시 원본 데이터를 복원하는 기능을 구현했습니다.

## 2. 주요 기능

*   **주문 데이터 압축**: 새로운 주문이 들어오면, 기존 허프만 코드를 사용해 주문 내역을 압축하고 파일에 추가합니다.
*   **주문 데이터 복원**: 압축된 파일로부터 모든 주문 내역을 읽어와 원래의 주문 목록을 복원하고 출력합니다.
*   **허프만 코드 동적 최적화**: 누적된 전체 주문 통계를 바탕으로 메뉴별 주문 빈도를 다시 계산하고, 새로운 허프만 트리를 생성하여 압축률을 최적화할 수 있습니다.
*   **파일 기반 데이터 관리**:
    *   `menu.txt`: 키오스크에서 판매하는 전체 메뉴 목록을 관리합니다.
    *   `order.txt`: 허프만 코드 테이블과 압축된 주문 데이터를 저장합니다.

## 3. 사용된 자료구조

본 프로젝트는 효율적인 데이터 처리를 위해 다음과 같은 자료구조를 활용합니다.

*   **연결 리스트 (Linked List)**
    *   **구현**: `LinkedList` 클래스로 직접 구현.
    *   **용도**: 개별 주문 내역(한 번의 주문에 포함된 여러 메뉴)을 저장합니다. 메뉴 추가 및 순차적인 접근이 필요하므로 연결 리스트를 사용했습니다.

*   **맵 (Map)**
    *   **구현**: C++ STL의 `std::map`.
    *   **용도**:
        1.  메뉴별 주문 빈도수(`frequencies`)를 저장합니다. 메뉴 이름을 Key로, 빈도수를 Value로 사용하여 빠르게 접근하고 갱신합니다.
        2.  생성된 허프만 코드(`huffmanCodes`)를 저장합니다. 메뉴 이름을 Key로, 대응하는 허프만 코드를 Value로 매핑합니다.

*   **우선순위 큐 (Priority Queue)**
    *   **구현**: C++ STL의 `std::priority_queue`.
    *   **용도**: 허프만 트리를 생성하는 과정에서 사용됩니다. 주문 빈도수가 가장 낮은 노드를 항상 우선적으로 추출하기 위해 최소 힙(Min-Heap)으로 동작하는 우선순위 큐를 활용했습니다.

*   **이진 트리 (Binary Tree)**
    *   **구현**: `HNode` 클래스로 직접 구현.
    *   **용도**: 허프만 부호화 알고리즘의 핵심인 허프만 트리를 구성합니다. 각 노드는 메뉴 정보와 빈도수를 가지며, 트리의 구조 자체가 메뉴별 코드 길이를 결정합니다.

*   **벡터 (Vector)**
    *   **구현**: C++ STL의 `std::vector`.
    *   **용도**: 전체 주문 목록(`orderLists`)을 관리합니다. 각 주문은 하나의 `LinkedList` 객체이며, 이 객체들을 동적 배열인 벡터에 저장하여 관리의 유연성을 높였습니다.

*   **스택 (Stack)**
    *   **구현**: C++ STL의 `std::stack`.
    *   **용도**: 완성된 허프만 트리를 순회하며 각 메뉴에 대한 허프만 코드를 생성할 때, 재귀 호출 대신 반복문을 사용하기 위해 스택을 활용했습니다.

## 4. 프로그램 구조 및 작동 방식

### 파일 구성
*   `main.cpp`: 프로그램의 주 실행 흐름을 제어합니다.
*   `Huffman.h` / `Huffman.cpp`: 허프만 트리 생성, 코드 생성, 압축 및 복원 등 핵심 로직을 담당하는 클래스입니다.
*   `LinkedList.h` / `LinkedList.cpp`: 각 주문 내역(메뉴 목록)을 저장하기 위한 연결 리스트 자료구조입니다.
*   `menu.txt`: 메뉴 이름과 가격 정보가 담긴 파일. (예: `Americano 3000`)
*   `order.txt`: 프로그램이 생성하고 관리하는 데이터 파일.
    *   **첫 번째 줄 (헤더)**: 현재 사용 중인 허프만 코드 테이블이 저장됩니다. (예: `Americano 01 Latte 1 ...`)
    *   **두 번째 줄부터**: 각 주문 내역이 허프만 코드로 변환되어 한 줄에 하나씩 저장됩니다.

### 작동 순서
1.  **초기화**: 프로그램 시작 시 `order.txt` 파일에서 허프만 코드 테이블과 압축된 주문 데이터를 읽어와 메모리에 복원합니다. (`decompress`)
2.  **신규 주문 처리**:
    *   사용자로부터 새로운 주문(메뉴 목록)을 입력받습니다.
    *   이 주문을 기존 주문 목록에 추가한 뒤, 전체 주문 내역을 `order.txt`에 다시 압축하여 저장합니다. (`compressOrder`)
3.  **압축률 최적화**:
    *   지금까지 누적된 모든 주문 내역과 `menu.txt`의 전체 메뉴를 바탕으로 각 메뉴의 빈도를 다시 계산합니다. (`countFrequencies`)
    *   새로운 빈도표를 기반으로 허프만 트리를 재구성하고(`buildHuffmanTree`), 최적화된 새 허프만 코드를 생성합니다. (`generateCodes`)
    *   이후 모든 주문 내역을 새로운 코드로 다시 압축하여 `order.txt`를 갱신합니다. (`compressEntire`)

## 5. 빌드 및 실행 방법

### 사전 준비
C++ 컴파일러(g++ 등)가 설치되어 있어야 합니다.

### 컴파일
아래 명령어를 사용하여 프로젝트를 컴파일할 수 있습니다.
```bash
g++ -std=c++11 -o kiosk_huffman main.cpp Huffman.cpp LinkedList.cpp
